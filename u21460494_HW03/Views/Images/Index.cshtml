@using u21460494_HW03.Models
@model List<FileModel>

@{
    ViewBag.Title = "Index";
}


<div class="well-sm">
    <h2>Images of any file type</h2>
    <p>
        Files from the "Media/Images/" folder
    </p>
</div>



@{
    
    WebImage photo = null;
    var newFileName = "";
    var imagePath = "";


    if (IsPost)
    {
        photo = WebImage.GetImageFromRequest();
        if (photo != null)
        {
            newFileName = Guid.NewGuid().ToString() + "_" +
                Path.GetFileName(photo.FileName);
            imagePath = "~/Media/Images/" + newFileName;

            photo.Save(imagePath);
        }
    } 
}


@if (imagePath != "")
{
    <div class="result">

        <img src="@Url.Content(@imagePath)" alt="Sample Image" height="79" />

    </div>}



@foreach (FileModel file in Model)
{

    @file.FileName

    <button type="button" class="btn btn-success">
        @Html.ActionLink("Download", "DownloadFile",
         new { fileName = file.FileName })
    </button>

    <button type="button" class="btn btn-danger">
        @Html.ActionLink("DELETE", "DeleteFile",
       new { fileName = file.FileName },
       new { onclick = "return confirm('Are you sure you wish to delete this?');" })
    </button>

}